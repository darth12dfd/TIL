# 1단계: 화면 구성하기

## 메인 화면

* 프레임 레이아웃과 하단 탭을 추가한다. 하단 탭의 각 탭 버튼을 누르면 프레임 레이아웃 안에 각 버튼에 맞는 프래그 먼트가 보이도록 한다.

### 메인 액티비티 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <!-- 프레임 레이아웃 -->
    <FrameLayout
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior"/>

    <!-- 하단 탭 -->
    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottom_navigation"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:itemBackground="@color/colorPrimary"
        app:itemIconTint="@drawable/item_color"
        app:itemTextColor="@drawable/item_color"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:menu="@menu/menu_bottom" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

* 최상위 레이아웃 안에 FrameLayout을 추가하고, 그 id 속성 값은 container로 설정했다.

* 그리고 app:layout_behavior 속성 값을 @string/appbar_scrolling_view_behavior로 설정하여 아래쪽에 있는 하단 탭 위쪽까지만 공간을 차지할 수 있도록 했다.

* 하단 탭에 보이는 탭 버튼들은 app:menu 속성으로 설정하며, 그 값이 @menu/menu_bottom으로 설정한다. 그리고 menu 폴더를 만들고 그 안에 XML 레이아웃을 만든다.

### 하단 메뉴 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <!-- 리스트 화면 메뉴 아이템-->
    <item
        android:id="@+id/tab1"
        app:showAsAction="ifRoom"
        android:enabled="true"
        android:icon="@drawable/list_48"
        android:title="목록"/>

    <!-- 입력 화면 메뉴 아이템-->
    <item
        android:id="@+id/tab2"
        app:showAsAction="ifRoom"
        android:icon="@drawable/write_48"
        android:title="작성"/>

    <!-- 통계 화면 메뉴 아이템-->
    <item
        android:id="@+id/tab3"
        app:showAsAction="ifRoom"
        android:enabled="true"
        android:icon="@drawable/graph_48"
        android:title="통계"/>
</menu>
```

### 프래그먼트 XML 레이아웃

* 하단 메뉴 레이아웃에 존재하는 3 개의 아이템에 맞는 각각의 프래그먼트를 만든다. 추가한 3개의 파일은 하단 탭의 탭 버튼을 눌렀을 때 보이게 만든다. 그 내용은 아래와 같다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Fragment1">

</LinearLayout>
```

### 프래그먼트 클래스

* 프래그먼트 XML 레이아웃을 추가했으므로 프래그먼트 클래스도 만든다.

```java
package org.techtown.diary;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

public class Fragment1 extends Fragment {
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        ViewGroup rootView=(ViewGroup) inflater.inflate(R.layout.fragment1,container,false);

        initUI(rootView);

        return rootView;
    }

    private void initUI(ViewGroup rootView){

    }
}
```

* ```onCreateView()``` 메서드 안에서 LayoutInflater 객체의 ```inflate()``` 메서드를 호출하면서 첫 번재 파라미터로 각 프래먼트 클래스에 맞는 XML 레이아웃을 전달한다.

* ```onCreateView()``` 메서드 안에서 호출하는 ```initUI()``` 메서드는 인플레이션 후에 XML 레이아웃 안에 들어있는 위젯이나 레이아웃을 찾아 변수에 할당하는 코드들을 넣기 위해 만들어둔다.

### 메인 액티비티 클래스

```java
package org.techtown.diary;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.view.MenuItem;
import android.widget.Toast;

import com.google.android.material.bottomnavigation.BottomNavigationView;

public class MainActivity extends AppCompatActivity implements OnTabItemSelectedListener{

    //프래그먼트 클래스
    Fragment1 fragment1;
    Fragment2 fragment2;
    Fragment3 fragment3;

    //하단 메뉴
    BottomNavigationView bottomNavigation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //프래그먼트 객체들 생성
        fragment1=new Fragment1();
        fragment2=new Fragment2();
        fragment3=new Fragment3();

        getSupportFragmentManager().beginTransaction().replace(R.id.container,fragment1).commit();//프래그먼트 매니저 세팅 및, 목록 화면을 초기화면으로 초기화

        bottomNavigation=findViewById(R.id.bottom_navigation);//하단 메뉴 참조
        //하단 메뉴 아이템 선택 리스너 설정
        bottomNavigation.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {
            @Override
            public boolean onNavigationItemSelected(@NonNull MenuItem item) {
                //선택된 메뉴 아이템에 따라 경우를 나눈다.
                switch (item.getItemId()){
                    case R.id.tab1://리스트 화면 선택시
                        Toast.makeText(getApplicationContext(),"첫 번째 탭 선택됨",Toast.LENGTH_LONG).show();
                        getSupportFragmentManager().beginTransaction().replace(R.id.container,fragment1).commit();

                        return true;
                    case R.id.tab2://입력 화면 선택시
                        Toast.makeText(getApplicationContext(),"두 번째 탭 선택됨",Toast.LENGTH_LONG).show();
                        getSupportFragmentManager().beginTransaction().replace(R.id.container,fragment2).commit();

                        return true;
                    case R.id.tab3://통계 화면 선택시
                        Toast.makeText(getApplicationContext(),"세 번째 탭 선택됨",Toast.LENGTH_LONG).show();
                        getSupportFragmentManager().beginTransaction().replace(R.id.container,fragment3).commit();

                        return true;
                }

                return false;
            }
        });
    }

    @Override
    public void onTabSelected(int position) {
        if(position==0){
            bottomNavigation.setSelectedItemId(R.id.tab1);
        }
        else if(position==1){
            bottomNavigation.setSelectedItemId(R.id.tab2);
        }
        else if(position==2){
            bottomNavigation.setSelectedItemId(R.id.tab3);
        }
    }
}
```

* 메인 액티비티 클래스 안에 3 개의 프래그먼트 변수가 선언되었으며 ```onCreate()``` 메서드 안에서 각각 객체로 만들어 변수에 할당한다.

* 그리고 프래그먼트 매니저 객체를 이용해 첫 번째 프레임 레이아웃 안에 추가되도록 했다.

* 하단 탭에는 OnNavigationItemSelectedListener를 설정했다. 이 리스너는 하단 탭에 들어있는 각각의 버튼을 눌렀을 때 ```onNavigationItemSelected()``` 메서드가 자동으로 호출되므로 그 안에서 메뉴 아이템의 id값으로 버튼을 구분한 후, 토스트 메시지를 띄우도록 한다.

### OnTabItemSelectedListener 인터페이스

* 이 인터페이스는 하나의 프래그먼트에서 다른 프래그먼트로 전환하는 용도로 사용하기 위해 정의한 인터페이스 이다.

```java
package org.techtown.diary;

public interface OnTabItemSelectedListener {
    public void onTabSelected(int position);
}
```

* 이 인터페이스 안에는 ```onTabSelected()``` 메서드를 선언한다. 메인 액티비티 클래스는 이 인터페이스를 구현하고, 그 안에도 onTabSelected()``` 메서드가 정의되어 있으며 이 메서드가 호출되면 하단 탭의 ```setSelected()``` 메서드를 이용해 다른 탭 버튼이 선택되도록 한다.

## 리스트 화면 

* 첫 번째 탭 버튼을 눌렀을 때 보이는 화면은 리스트 화면이다. 리스트 화면은 Fragment1 클래스로 정의되어 있다.

* 그리고 각각의 화면에 대해 사용할 라이브러리를 build.gragle(Module:app) 파일에 추가한다.

```gradle
plugins {
    id 'com.android.application'
}

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.2"

    defaultConfig {
        applicationId "org.techtown.diary"
        minSdkVersion 16
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

repositories {
    maven { url 'https://jitpack.io' }
}

dependencies {

    implementation 'androidx.appcompat:appcompat:1.2.0'
    implementation 'com.google.android.material:material:1.2.1'
    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'
    testImplementation 'junit:junit:4.+'
    androidTestImplementation 'androidx.test.ext:junit:1.1.2'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'

    implementation 'lib.kingja.switchbutton:switchbutton:1.1.8'
    implementation 'com.github.channguyen:rsv:1.0.1'
    implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0-alpha'
}
```

* repositories 안에 명시한 url 정보는 라이브러리를 다운로드할 서벗 주소를 추가한 것이다. 이는 아래 dependency에서 추가한 라이브러리들 중에 해당 서버로부터 다운로드 해야 하는 것이 있기 때문이다.

* lib.kingja.switchbutton:switchbutton 라이브러리는 예쁜 라디오 버튼을 만들 수 있게 도와준다. 리스트 화면을 만들 때 사용한다.

* com.github.channguyen:rsv 라이브러리는 시크바가 연속이 아닌 구간으로 선택될 수 있도록 만들어 준다. 입력 화면을 만들 때 사용한다.

* com.github.PhilJay:MPAndroidChart 라이브러리는 그래프를 그리는 데 사용한다. 통계 화면을 만들 때 사용한다.

### 리스트 화면 프래그먼트 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_marginBottom="60dp"
    tools:context=".Fragment1">

    <!-- 리스트 화면 상단 부분 -->

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- 라디오 버튼(내용 중심인지 사진 중심 인지 결정한다.)-->
        <lib.kingja.switchbutton.SwitchMultiButton
            android:id="@+id/switchButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginStart="10dp"
            android:layout_marginLeft="10dp"
            android:padding="8dp"
            app:selectedColor="#eb7b00"
            app:selectedTab="0"
            app:strokeRadius="5dp"
            app:strokeWidth="1dp"
            app:switchTabs="@array/switch_tabs"
            app:textSize="14sp" />

        <!-- 버튼(오늘 기록한 한줄 일기)-->
        <Button
            android:id="@+id/todayWriteButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_alignParentRight="true"
            android:background="@drawable/select_button"
            android:text="오늘 작성"
            android:textcolor="@android:color/white"/>
    </RelativeLayout>

    <!-- 리싸이클러 뷰 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginStart="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginEnd="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="8dp" />
</LinearLayout>
```

* '내용'과 '사진' 중에서 선택할 수 있는 라디오 버튼을 왼쪽 상단에 만들고 '오늘 작성'이라는 버튼을 오른쪽에 배치한다. 왼쪽의 라디오 버튼은 앞에서 추가한 lib.kingja.switchbutton:switchbutton라이브러리를 사용해서 만든 것이며, 오른쪽 버튼은 버튼 배경에 드로어블을 적용한다.

* 그리고 라디오 버튼과 '오늘 작성' 버튼 아래쪽에 리싸이클러뷰를 추가한다.

### 오늘 작성 버튼 백그라운드 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:radius="30dip"/>
            <stroke android:width="1dp" android:color="#FFFF561D"/>
            <gradient android:angle="-90" android:startColor="#FFFF561D" android:endColor="#FFFF561D"/>
        </shape>
    </item>
    <item android:state_focused="true">
        <shape android:shape="rectangle">
            <corners android:radius="30dip"/>
            <stroke android:width="1dip" android:color="#FFFF561D"/>
            <solid android:color="#FFFF561D"/>
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle">
            <corners android:radius="30dip"/>
            <stroke android:width="1dip" android:color="#FFFF561D"/>
            <gradient android:angle="-90" android:startColor="#FFFF561D" android:endColor="#FFFF561D"/>
        </shape>
    </item>
</selector>
```

* selector 태그 안에 item 태그들을 넣어 버튼의 배경 모양이 만들어지게 정의한다.

### array XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="switch_tabs">
        <item>내용</item>
        <item>사진</item>
    </string-array>

    <string-array name="switch_days">
        <item>월</item>
        <item>화</item>
        <item>수</item>
        <item>목</item>
        <item>금</item>
        <item>토</item>
        <item>일</item>
    </string-array>
</resources>
```

* SwitchMultiButton 위젯은 라디오 버튼을 예쁘게 만들기 위해 사용되었으며,/app/res/values 폴더 안에 위의 파일을 만들어서 switch_tabs와 switch_days를 설정해야 한다.

### 노트 아이템 XML 레이아웃

* 이 파일은 리싸이클러뷰를 위한 XML 레이아웃이다. 즉, 리싸이클러 뷰에 표시될 아이템들의 모양을 나타낸다. 

* 모양은 두 가지로 나타낸다. 하나는 내용 중심의 레이아웃, 하나는 사진 중심의 레이아웃이다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- 카드 뷰로 리싸이클러뷰에 들어갈 아이템 정의-->
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="4dp"
    android:layout_marginTop="8dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="4dp"
    app:cardBackgroundColor="#FFFFFFFF"
    app:cardCornerRadius="10dp"
    app:cardElevation="5dp">

    <!-- 내용을 중심으로 보여줄 한 줄 일기 레이아웃-->
    <LinearLayout
        android:id="@+id/layout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:visibility="visible">

        <!-- 기분 상태를 표현할 이미지 뷰-->
        <ImageView
            android:id="@+id/moodImageView"
            android:layout_width="54dp"
            android:layout_height="54dp"
            android:layout_gravity="center_vertical"
            android:padding="5dp"
            app:srcCompat="@drawable/smile5_48" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <!-- 일기 내용을 저장할 텍스트뷰-->
            <TextView
                android:id="@+id/contentsTextView"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="내용"
                android:textSize="24sp" />

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp">

                <!-- 날씨를 보여줄 이미지 뷰-->
                <ImageView
                    android:id="@+id/weatherImageView"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_alignParentLeft="true"
                    app:srcCompat="@drawable/weather_icon_1" />

                <!-- 찍은 사진을 보여줄 이미지 뷰-->
                <ImageView
                    android:id="@+id/pictureExistsImageView"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_marginStart="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_toRightOf="@id/weatherImageView"
                    app:srcCompat="@drawable/picture_128" />

                <!-- 장소를 나타낼 텍스트뷰-->
                <TextView
                    android:id="@+id/locationTextView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:text="강남구 삼성동"
                    android:textSize="16sp" />

                <!-- 날짜를 나타낼 텍스트뷰-->
                <TextView
                    android:id="@+id/dateTextView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:text="02월 10일"
                    android:textColor="#FF0000FF"
                    android:textSize="16sp" />
            </RelativeLayout>
        </LinearLayout>
    </LinearLayout>

    <!-- 사진을 중심으로 보여줄 한 줄 일기 레이아웃-->
    <LinearLayout
        android:id="@+id/layout2"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="gone">

        <!-- 사진을 보여줄 이미지 뷰-->
        <ImageView
            android:id="@+id/pictureImageView"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:layout_gravity="center_vertical"
            android:layout_margin="10dp"
            android:padding="5dp"
            app:srcCompat="@drawable/picture1" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginEnd="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginBottom="10dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <!-- 일기 내용을 저장할 텍스트뷰-->
            <TextView
                android:id="@+id/contentsTextView2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="내용"
                android:textSize="24sp" />

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp">

                <!-- 기분 상태를 표현할 이미지 뷰-->
                <ImageView
                    android:id="@+id/moodImageView2"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_alignParentLeft="true"
                    android:padding="5dp"
                    app:srcCompat="@drawable/smile5_48" />

                <!-- 날씨를 보여줄 이미지 뷰-->
                <ImageView
                    android:id="@+id/weatherImageView2"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_toRightOf="@+id/moodImageView2"
                    android:layout_marginLeft="10dp"
                    app:srcCompat="@drawable/weather_icon_1" />

                <!-- 장소를 나타낼 텍스트뷰-->
                <TextView
                    android:id="@+id/locationTextView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:text="강남구 삼성동"
                    android:textSize="16sp" />

                <!-- 날짜를 나타낼 텍스트뷰-->
                <TextView
                    android:id="@+id/dateTextView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:text="02월 10일"
                    android:textColor="#FF0000FF"
                    android:textSize="16sp" />

            </RelativeLayout>
        </LinearLayout>


    </LinearLayout>
</androidx.cardview.widget.CardView>
```

* 최상위 레이아웃은 CardView로 변경했으며, 그 안에 LinearLayout 두 개를 추가했다. 이는 아이템이 보이는 모양이 '내용'중심인지와 '사진'중심이닞 나뉘기 때문이다.

* 첫 번째 LinearLayout의 visibility속성을 visible로 설정하고, 두번째 레이아웃의 visibility 속성을 gone으로 설정한다.

### 노트 클래스

* 이 클래스는 각 아이템의 데이터를 담아둘 객체를 정의한 클래스이다.

```java
package org.techtown.diary;

public class Note {
    int _id;
    String weather;
    String address;
    String locationX;
    String locationY;
    String contents;
    String mood;
    String picture;
    String createDateStr;

    public Note(int _id, String weather, String address, String locationX, String locationY, String contents, String mood, String picture, String createDateStr) {
        this._id = _id;
        this.weather = weather;
        this.address = address;
        this.locationX = locationX;
        this.locationY = locationY;
        this.contents = contents;
        this.mood = mood;
        this.picture = picture;
        this.createDateStr = createDateStr;
    }

    public int get_id() {
        return _id;
    }

    public void set_id(int _id) {
        this._id = _id;
    }

    public String getWeather() {
        return weather;
    }

    public void setWeather(String weather) {
        this.weather = weather;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getLocationX() {
        return locationX;
    }

    public void setLocationX(String locationX) {
        this.locationX = locationX;
    }

    public String getLocationY() {
        return locationY;
    }

    public void setLocationY(String locationY) {
        this.locationY = locationY;
    }

    public String getContents() {
        return contents;
    }

    public void setContents(String contents) {
        this.contents = contents;
    }

    public String getMood() {
        return mood;
    }

    public void setMood(String mood) {
        this.mood = mood;
    }

    public String getPicture() {
        return picture;
    }

    public void setPicture(String picture) {
        this.picture = picture;
    }

    public String getCreateDateStr() {
        return createDateStr;
    }

    public void setCreateDateStr(String createDateStr) {
        this.createDateStr = createDateStr;
    }
}

```

* Note 클래스 안에는 _id 속성과 함께 weather, address 등의 속성이 정의되어 있다. id_속성은 나중에 데이터베이스에서 조회한 _id값을 넣어두기 위한 것이다.

* 변수들을 모두 정의하고 생성자를 만든 후에 각각의 변수들을 위한 ```set()```, ```get()``` 메서드를 추가했다.

### 노트 어댑터 클래스

* 이제 리싸이클러뷰를 위한 NoteAdapter 클래스를 정의한다.

```java
package org.techtown.diary;

import android.net.Uri;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import java.util.ArrayList;

public class NoteAdapter extends RecyclerView.Adapter<NoteAdapter.ViewHolder> implements OnNoteItemClickListener {
    ArrayList<Note> items=new ArrayList<Note>();

    OnNoteItemClickListener listener;

    int layoutType=0;

    @NonNull
    @Override
    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        LayoutInflater inflater=LayoutInflater.from(parent.getContext());
        View itemView=inflater.inflate(R.layout.note_item,parent,false);

        return new ViewHolder(itemView,this,layoutType);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
        Note item=items.get(position);
        holder.setItem(item);
        holder.setLayoutType(layoutType);
    }

    @Override
    public int getItemCount() {
        return items.size();
    }

    public void setOnItemClickListener(OnNoteItemClickListener listener){
        this.listener=listener;
    }

    @Override
    public void onItemClick(ViewHolder holder, View view, int position) {
        if(listener!=null){
            listener.onItemClick(holder,view,position);
        }
    }

    public void switchLayout(int position){
        layoutType=position;
    }

    public void addItem(Note item){
        items.add(item);
    }

    public void setItems(ArrayList<Note> items){
        this.items=items;
    }

    public Note getItem(int position){
        return items.get(position);
    }

    static class ViewHolder extends RecyclerView.ViewHolder{
        //노트 아이템 XML 레이아웃에 저장된 값들의 변수 생성
        LinearLayout layout1;
        LinearLayout layout2;

        ImageView moodImageView;
        ImageView moodImageView2;

        ImageView pictureExistsImageView;
        ImageView pictureImageView;

        ImageView weatherImageView;
        ImageView weatherImageView2;

        TextView contentsTextView;
        TextView contentsTextView2;

        TextView locationTextView;
        TextView locationTextView2;

        TextView dateTextView;
        TextView dateTextView2;

        public ViewHolder(View itemView, final OnNoteItemClickListener listener,int layoutType){
            super(itemView);

            layout1=itemView.findViewById(R.id.layout1);
            layout2=itemView.findViewById(R.id.layout2);

            moodImageView=itemView.findViewById(R.id.moodImageView);
            moodImageView2=itemView.findViewById(R.id.moodImageView2);

            pictureExistsImageView=itemView.findViewById(R.id.pictureExistsImageView);
            pictureImageView=itemView.findViewById(R.id.pictureImageView);

            weatherImageView=itemView.findViewById(R.id.weatherImageView);
            weatherImageView2=itemView.findViewById(R.id.weatherImageView2);

            contentsTextView=itemView.findViewById(R.id.contentsTextView);
            contentsTextView2=itemView.findViewById(R.id.contentsTextView2);

            locationTextView=itemView.findViewById(R.id.locationTextView);
            locationTextView2=itemView.findViewById(R.id.locationTextView2);

            dateTextView=itemView.findViewById(R.id.dateTextView);
            dateTextView2=itemView.findViewById(R.id.dateTextView2);

            itemView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    int position=getAdapterPosition();

                    if(listener!=null){
                        listener.onItemClick(ViewHolder.this,view,position);
                    }
                }
            });
            setLayoutType(layoutType);
        }

        //아이템 설정하기ㅏ
        public void setItem(Note item){
            //기분
            String mood=item.getMood();
            int moodIndex=Integer.parseInt(mood);
            setMoodImage(moodIndex);

            //사진
            String picturePath=item.getPicture();
            if(picturePath!=null && !picturePath.equals("")){
                pictureExistsImageView.setVisibility(View.VISIBLE);
                pictureImageView.setVisibility(View.VISIBLE);
                pictureImageView.setImageURI(Uri.parse("file://"+picturePath));
            }
            else{
                pictureExistsImageView.setVisibility(View.GONE);
                pictureImageView.setVisibility(View.GONE);
                pictureImageView.setImageResource(R.drawable.noimagefound);
            }

            //날씨
            String weather=item.getWeather();
            int weatherIndex=Integer.parseInt(weather);
            setWeatherImage(weatherIndex);

            //내용
            contentsTextView.setText(item.getContents());
            contentsTextView2.setText(item.getContents());

            //장소
            locationTextView.setText(item.getAddress());
            locationTextView2.setText(item.getAddress());

            //날짜
            dateTextView.setText(item.getCreateDateStr());
            dateTextView2.setText(item.getCreateDateStr());
        }

        //기분 이미지 세팅하기
        public void setMoodImage(int moodIndex){
            switch (moodIndex){
                case 0:
                    moodImageView.setImageResource(R.drawable.smile1_48);
                    moodImageView2.setImageResource(R.drawable.smile1_48);
                    break;
                case 1:
                    moodImageView.setImageResource(R.drawable.smile2_48);
                    moodImageView2.setImageResource(R.drawable.smile2_48);
                    break;
                case 2:
                    moodImageView.setImageResource(R.drawable.smile3_48);
                    moodImageView2.setImageResource(R.drawable.smile3_48);
                    break;
                case 3:
                    moodImageView.setImageResource(R.drawable.smile4_48);
                    moodImageView2.setImageResource(R.drawable.smile4_48);
                    break;
                case 4:
                    moodImageView.setImageResource(R.drawable.smile5_48);
                    moodImageView2.setImageResource(R.drawable.smile5_48);
                    break;
                default:
                    moodImageView.setImageResource(R.drawable.smile3_48);
                    moodImageView2.setImageResource(R.drawable.smile3_48);
                    break;
            }
        }

        //날씨 이미지 세팅하기
        public void setWeatherImage(int weatherIndex){
            switch (weatherIndex){
                case 0:
                    weatherImageView.setImageResource(R.drawable.weather_icon_1);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_1);
                    break;
                case 1:
                    weatherImageView.setImageResource(R.drawable.weather_icon_2);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_2);
                    break;
                case 2:
                    weatherImageView.setImageResource(R.drawable.weather_icon_3);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_3);
                    break;
                case 3:
                    weatherImageView.setImageResource(R.drawable.weather_icon_4);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_4);
                    break;
                case 4:
                    weatherImageView.setImageResource(R.drawable.weather_icon_5);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_5);
                    break;
                case 5:
                    weatherImageView.setImageResource(R.drawable.weather_icon_6);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_6);
                    break;
                case 6:
                    weatherImageView.setImageResource(R.drawable.weather_icon_7);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_7);
                    break;
                default:
                    weatherImageView.setImageResource(R.drawable.weather_icon_1);
                    weatherImageView2.setImageResource(R.drawable.weather_icon_1);
                    break;
            }
        }

        //아이템 레이아웃 타입 설정
        public void setLayoutType(int layoutType){
            //내용 중심으로 일기 보여주기
            if(layoutType==0){
                layout1.setVisibility(View.VISIBLE);
                layout2.setVisibility(View.GONE);
            }
            //사진 중심으로 일기 보여주기
            else if(layoutType==1){
                layout1.setVisibility(View.GONE);
                layout2.setVisibility(View.VISIBLE);
            }
        }
    }
}

```

* 이 클래스 안에는 ```onCreateViewHolder()```와 ```onBindViewHolder()``` 메서드가 저으이되어 있다. 이 두 메서드는 각 아이템을 윟나 뷰 객체를 담고 있을 뷰홀더 객체가 만들어질 때와 바인딩 될 때 자동으로 호출된다.

* 그리고 어댑터 안에 뷰홀더를 정의하는 부분이 있다. 각 아이템을 윟나 뷰는 note_item.xml 파일에서 정의한 레이아웃을 이용해 뷰 객체로 만들어지고, 이 객체가 뷰홀더에 담겨지기 때문에 뷰홀더를 정의하는ㄴ 부분에서는 레이아웃 안에 들어있는 위젯이나 레이아웃을 찾아 변수에 할당한 후 Note 객체가 설정될 때 그 객체에 들어 있는 데이터를 위젯에 설정하는 코드가 들어간다.

* ```setMoodImage()``` 메서드와 ```setWeatherImage()``` 메서드는 그날의 기분과 날씨를 설정하는 역할을 하는데 데이터로 저장되는 값은 정수이기에, 각각의 값에 해당하는 아이콘이 이미지뷰에 설정되도록 한다.

* ```setLayoutType()``` 메서드는 아이템을 내용 중심으로 보이게 할건지 아니면 사진 중심으로 할 지에 따라 다른 레이아웃이 보이도록 한다.

* 각 아이템을 선택했을 대 이벤트를 처리하기 위해서는 OnNoteItemClickListener 인터페이스를 정의하여 사용한다.

```java
package org.techtown.diary;

import android.view.View;

public interface OnNoteItemClickListener {
    public void onItemClick(NoteAdapter.ViewHolder holder, View view,int position);
}
```

### 리스트 화면 프래그먼트 클래스

```java
package org.techtown.diary;

import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import lib.kingja.switchbutton.SwitchMultiButton;

public class Fragment1 extends Fragment {

    RecyclerView recyclerView;
    NoteAdapter adapter;

    Context context;
    OnTabItemSelectedListener listener;

    @Override
    public void onAttach(@NonNull Context context) {
        super.onAttach(context);

        this.context=context;

        if(context instanceof OnTabItemSelectedListener){
            listener=(OnTabItemSelectedListener) context;
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();

        if(context!=null){
            context=null;
            listener=null;
        }
    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        ViewGroup rootView=(ViewGroup) inflater.inflate(R.layout.fragment1,container,false);

        initUI(rootView);

        return rootView;
    }

    private void initUI(ViewGroup rootView){
        //오늘 입력 버튼
        Button todayWriteButton=rootView.findViewById(R.id.todayWriteButton);
        todayWriteButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(listener!=null){
                    listener.onTabSelected(1);//버튼 입력시 한 줄 일기 입력 창으로 이동한다.
                }
            }
        });
        
        //멀티터치 버튼
        SwitchMultiButton switchMultiButton=rootView.findViewById(R.id.switchButton);
        switchMultiButton.setOnSwitchListener(new SwitchMultiButton.OnSwitchListener() {
            @Override
            public void onSwitch(int position, String tabText) {
                Toast.makeText(getContext(),tabText,Toast.LENGTH_LONG).show();

                adapter.switchLayout(position);
                adapter.notifyDataSetChanged();
            }
        });

        recyclerView=rootView.findViewById(R.id.recyclerView);//리싸이클러뷰 참조

        //레이아웃 매니저 설정
        LinearLayoutManager layoutManager=new LinearLayoutManager(getContext());
        recyclerView.setLayoutManager(layoutManager);

        adapter=new NoteAdapter();

        //어댑터에 아이템 추가
        adapter.addItem(new Note(0,"0","강남구 삼성동", "","","오늘 너무 행복해!","0","captuer1.jpg","2월10일"));
        adapter.addItem(new Note(1,"1","강남구 삼성동","","","친구와 재미있게 놀았어","0","capture1.jpg","2월11일"));
        adapter.addItem(new Note(2,"0","강남구 역삼동","","","집에 왔는데 너무 피곤해 ㅠㅠ","0",null,"2월13일"));

        //해당 어댑터를 리싸이클러뷰의 어댑터로 지정
        recyclerView.setAdapter(adapter);

        adapter.setOnItemClickListener(new OnNoteItemClickListener() {
            @Override
            public void onItemClick(NoteAdapter.ViewHolder holder, View view, int position) {
                Note item=adapter.getItem(position);
                Toast.makeText(getContext(),"아이템 선택됨: "+item.getContents(),Toast.LENGTH_LONG).show();
            }
        });
    }
}

```

* ```onAttach()``` 메서드는 이 프래그먼트가 액티비티 위에 올라갈 때 호출되고, ```onDetach()``` 메서드는 이 프래그먼트가 액티비티에서 내려올 때 호출된다.

* ```onAttach()``` 메서드에서는 컨텍스트 객체나 리스너 객체를 참조하여 변수에 할당하는 역할을 한다.

* ```initUI()``` 메서드 안에서는 '내용'과 '사진' 중에서 선택했을 때 어댑터의 ```switchLayout()``` 메서드를 호출하여 아이템의 레이아웃을 바꿔준다.

* 그리고 [오늘 작성] 버튼을 누르면 두 번째 프래그먼트를 띄워준다.

* 리싸이클러뷰에는 샘플로 아이템을 3개 보여줄 것이다. 이를 위해 어댑터의 ```addItem()``` 메서드를 호출하여 Note 객체를 추가한다. 이 객체는 테스트를 위해 넣어준 가상 데이터를 담고 있다.

## 입력 화면

* 두 번재 화면에서는 일기를 입력할 것이므로 내용을 입력할 수 있는 위젯들을 배치한다.

### 입력 화면 프래그먼트 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Fragment2" >

    <!-- 상위 레이아웃 -->
    <RelativeLayout
        android:id="@+id/topLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:padding="4dp">

        <ImageView
            android:id="@+id/weatherIcon"
            android:layout_width="28dp"
            android:layout_height="28dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:src="@drawable/weather_1" />

        <TextView
            android:id="@+id/dateTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:textSize="26sp"
            android:text="00월00일" />

        <TextView
            android:id="@+id/locationTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text="강남구 삼성동"
            android:textSize="13sp" />
    </RelativeLayout>

    <!-- 내용 레이아웃 -->
    <RelativeLayout
        android:id="@+id/contentsLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@id/moodLayout"
        android:layout_below="@id/topLayout">

        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentTop="true"
            android:layout_marginStart="4dp"
            android:layout_marginLeft="4dp"
            android:layout_marginTop="8dp"
            android:layout_marginEnd="4dp"
            android:layout_marginRight="4dp"
            android:layout_marginBottom="4dp"
            app:cardBackgroundColor="#FFFFFFFF"
            app:cardCornerRadius="10dp"
            app:cardElevation="5dp" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical">

                <EditText
                    android:id="@+id/contentsInput"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:hint="내용 입력"
                    android:maxLines="1"
                    android:textSize="32sp" />

                <ImageView
                    android:id="@+id/pictureImageView"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_margin="8dp"
                    android:src="@drawable/imagetoset" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>
    </RelativeLayout>

    <!-- 감정 표현 레이아웃 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/moodLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/bottomLayout"
        android:layout_marginStart="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginTop="8dp"
        android:layout_marginEnd="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"
        app:cardBackgroundColor="#FFFFFFFF"
        app:cardCornerRadius="10dp"
        app:cardElevation="5dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

            <!-- 시크가 추가 부분-->
            <com.github.channguyen.rsv.RangeSliderView
                android:id="@+id/sliderView"
                android:layout_width="match_parent"
                android:layout_height="40dp"
                android:layout_marginTop="20dp"
                app:filledColor="#FF6600"
                app:emptyColor="#a8aeb8"
                app:rangeCount="5"
                app:sliderRadiusPercent="0.4"
                app:barHeightPercent="0.1"/>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:layout_marginBottom="10dp"
                android:orientation="horizontal">

                <ImageView
                    android:layout_width="0dp"
                    android:layout_height="30dp"
                    android:layout_weight="1"
                    android:src="@drawable/smile1_48" />

                <ImageView
                    android:layout_width="0dp"
                    android:layout_height="30dp"
                    android:layout_weight="1"
                    android:src="@drawable/smile2_48" />

                <ImageView
                    android:layout_width="0dp"
                    android:layout_height="30dp"
                    android:layout_weight="1"
                    android:src="@drawable/smile3_48" />

                <ImageView
                    android:layout_width="0dp"
                    android:layout_height="30dp"
                    android:layout_weight="1"
                    android:src="@drawable/smile4_48" />

                <ImageView
                    android:layout_width="0dp"
                    android:layout_height="30dp"
                    android:layout_weight="1"
                    android:src="@drawable/smile5_48" />
            </LinearLayout>
        </LinearLayout>
    </androidx.cardview.widget.CardView>

    <!-- 하단 레이아웃 -->
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/bottomLayout"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="60dp"
        android:paddingTop="10dp"
        android:paddingBottom="10dp">

        <Button
            android:id="@+id/saveButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginStart="20dp"
            android:layout_marginLeft="20dp"
            android:background="@drawable/select_button"
            android:text="저장"
            android:textColor="@android:color/white" />

        <Button
            android:id="@+id/deleteButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:background="@drawable/select_button"
            android:text="삭제"
            android:textColor="@android:color/white" />

        <Button
            android:id="@+id/closeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="20dp"
            android:background="@drawable/select_button"
            android:text="닫기"
            android:textColor="@android:color/white" />
    </RelativeLayout>


</RelativeLayout>
```

* 내용을 입력할 수 있는 입력상자와 사진을 보여줄 수 있는 이미지뷰는 카드뷰 안에 들어있다. 그리고 그아래에는 기분을 선택할 수 있는 RangeSliderView 가 있으며 이것 역시 카드뷰 안에 있다.

* RangeSliderView 아래쪽에는 현재 어떤 기분인지 여주는 다섯 개의 기분 아이콘이 이미지뷰에 설정되어 화면에 표시된다. 다섯 개의 기분 중에서 하나를 선택할 수 있다.


### 입력 화면 프래그먼트 클래스

```java
package org.techtown.diary;

import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import com.github.channguyen.rsv.RangeSliderView;

public class Fragment2 extends Fragment {

    Context context;
    OnTabItemSelectedListener listener;

    @Override
    public void onAttach(@NonNull Context context) {
        super.onAttach(context);

        this.context=context;

        if(context instanceof OnTabItemSelectedListener){
            listener=(OnTabItemSelectedListener) context;
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();

        if(context!=null){
            context=null;
            listener=null;
        }
    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        ViewGroup rootView=(ViewGroup) inflater.inflate(R.layout.fragment2,container,false);

        initUI(rootView);

        return rootView;
    }

    private void initUI(ViewGroup rootView){

        Button saveButton=rootView.findViewById(R.id.saveButton);
        saveButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(listener!=null){
                    listener.onTabSelected(0);
                }
            }
        });

        Button deleteButton=rootView.findViewById(R.id.deleteButton);
        deleteButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(listener!=null){
                    listener.onTabSelected(0);
                }
            }
        });

        Button closebutton=rootView.findViewById(R.id.closeButton);
        closebutton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(listener!=null){
                    listener.onTabSelected(0);
                }
            }
        });

        RangeSliderView sliderView=rootView.findViewById(R.id.sliderView);
        sliderView.setOnSlideListener(new RangeSliderView.OnSlideListener() {
            @Override
            public void onSlide(int index) {
                Toast.makeText(context,"moodIndex changed to "+index,Toast.LENGTH_LONG).show();
            }
        });

        sliderView.setInitialIndex(2);
    }
}
```

* ```initUI()``` 메서드의 세 개의 버튼을 눌렀을 때 리스트 화면으로 이동하도록 한다.

* 그리고 RangeSliderView에서 사용자가 값을 조정하면 기분 인덱스 값이 바귀도록 리스너를  설정한다.

* OnSlideListener 객체를 설정하면 값이 바뀔 때마다 ```onSlide()``` 메서드가 자동으로 호출된다.

* RangeSliderView의 기본 값은 ```setInitialIndex()``` 메서드의 인자로 2를 전달하여 설정할 수 있는데, 2로 설정하면 다섯개의 기분 주에서 가운데 값으로 설정된다.

## 통계 화면

* 세 번째 화면에서는 매일매일 입력했던 기분의 통계를 그래프로 보여줄 것이므로 그래프를 카드뷰 안에 배치한다.

### 통계화면 프래그먼트 XML 레이아웃

```xml
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="60dp"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <!-- 기분 별 비율 파이 그래프-->

        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:layout_marginStart="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginEnd="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginBottom="5dp"
            app:cardBackgroundColor="#FFFFFFFF"
            app:cardCornerRadius="10dp"
            app:cardElevation="5dp" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="10dp"
                android:orientation="vertical">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="기분별 비율"
                    android:textSize="24sp"
                    android:textStyle="bold" />

                <com.github.mikephil.charting.charts.PieChart
                    android:id="@+id/chart1"
                    android:layout_width="250dp"
                    android:layout_height="250dp"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"
                    android:layout_gravity="center_horizontal"/>
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- 요일별 기분 막대 그래프 -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="10dp"
            android:layout_marginStart="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginEnd="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginBottom="5dp"
            app:cardBackgroundColor="#FFFFFFFF"
            app:cardCornerRadius="10dp"
            app:cardElevation="5dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="10dp"
                android:orientation="vertical">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="요일별 기분"
                    android:textSize="24sp"
                    android:textStyle="bold" />

                <com.github.mikephil.charting.charts.BarChart
                    android:id="@+id/chart2"
                    android:layout_width="250dp"
                    android:layout_height="250dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginTop="10dp"
                    />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="10dp"
            android:layout_marginStart="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginEnd="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginBottom="5dp"
            app:cardBackgroundColor="#FFFFFFFF"
            app:cardCornerRadius="10dp"
            app:cardElevation="5dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_margin="10dp"
                android:orientation="vertical">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="기분 변화"
                    android:textSize="24sp"
                    android:textStyle="bold" />

                <com.github.mikephil.charting.charts.LineChart
                    android:id="@+id/chart3"
                    android:layout_width="250dp"
                    android:layout_height="250dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"/>
            </LinearLayout>
        </androidx.cardview.widget.CardView>


    </LinearLayout>
</ScrollView>
```

* 세 개의 카드뷰 안에는 각각 텍스트뷰와 함께 파이차트, 바차트, 라인차트가 들어있다. 

### 통계 화면 프래그먼트 클래스

```java
package org.techtown.diary;

import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.fragment.app.Fragment;

import com.github.mikephil.charting.charts.BarChart;
import com.github.mikephil.charting.charts.LineChart;
import com.github.mikephil.charting.charts.PieChart;
import com.github.mikephil.charting.components.Legend;
import com.github.mikephil.charting.components.XAxis;
import com.github.mikephil.charting.components.YAxis;
import com.github.mikephil.charting.data.BarData;
import com.github.mikephil.charting.data.BarDataSet;
import com.github.mikephil.charting.data.BarEntry;
import com.github.mikephil.charting.data.Entry;
import com.github.mikephil.charting.data.LineData;
import com.github.mikephil.charting.data.LineDataSet;
import com.github.mikephil.charting.data.PieData;
import com.github.mikephil.charting.data.PieDataSet;
import com.github.mikephil.charting.data.PieEntry;
import com.github.mikephil.charting.utils.ColorTemplate;
import com.github.mikephil.charting.utils.MPPointF;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Locale;
import java.util.concurrent.TimeUnit;

public class Fragment3 extends Fragment {
    PieChart chart;
    BarChart chart2;
    LineChart chart3;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.fragment3, container, false);

        initUI(rootView);

        return rootView;
    }

    private void initUI(ViewGroup rootView) {
        chart = rootView.findViewById(R.id.chart1);
        chart.setUsePercentValues(true);
        chart.getDescription().setEnabled(false);

        chart.setCenterText("기분별 비율");

        chart.setTransparentCircleColor(Color.WHITE);
        chart.setTransparentCircleAlpha(110);

        chart.setHoleRadius(58f);
        chart.setTransparentCircleRadius(61f);

        chart.setDrawCenterText(true);

        chart.setHighlightPerTapEnabled(true);


        Legend legent1 = chart.getLegend();
        legent1.setEnabled(false);

        chart.setEntryLabelColor(Color.WHITE);
        chart.setEntryLabelTextSize(12f);

        setData1();


        chart2 = rootView.findViewById(R.id.chart2);
        chart2.setDrawValueAboveBar(true);

        chart2.getDescription().setEnabled(false);
        chart2.setDrawGridBackground(false);

        XAxis xAxis = chart2.getXAxis();
        xAxis.setEnabled(false);

        YAxis leftAxis = chart2.getAxisLeft();
        leftAxis.setLabelCount(6, false);
        leftAxis.setAxisMinimum(0.0f);
        leftAxis.setGranularityEnabled(true);
        leftAxis.setGranularity(1f);


        YAxis rightAxis = chart2.getAxisRight();
        rightAxis.setEnabled(false);

        Legend legend2 = chart2.getLegend();
        legend2.setEnabled(false);

        chart2.animateXY(1500, 1500);

        setData2();


        chart3 = rootView.findViewById(R.id.chart3);

        chart3.getDescription().setEnabled(false);
        chart3.setDrawGridBackground(false);

        // set an alternative background color
        chart3.setBackgroundColor(Color.WHITE);
        chart3.setViewPortOffsets(0, 0, 0, 0);

        // get the legend (only possible after setting data)
        Legend legend3 = chart3.getLegend();
        legend3.setEnabled(false);

        XAxis xAxis3 = chart3.getXAxis();
        xAxis3.setPosition(XAxis.XAxisPosition.BOTTOM_INSIDE);
        xAxis3.setTextSize(10f);
        xAxis3.setTextColor(Color.WHITE);
        xAxis3.setDrawAxisLine(false);
        xAxis3.setDrawGridLines(true);
        xAxis3.setTextColor(Color.rgb(255, 192, 56));
        xAxis3.setCenterAxisLabels(true);
        xAxis3.setGranularity(1f);
        xAxis3.setValueFormatter(new ValueFormatter() {

            private final SimpleDateFormat mFormat = new SimpleDateFormat("MM-DD", Locale.KOREA);

            @Override
            public String getFormattedValue(float value) {

                long millis = TimeUnit.HOURS.toMillis((long) value);
                return mFormat.format(new Date(millis));
            }
        });

        YAxis leftAxis3 = chart3.getAxisLeft();
        leftAxis3.setPosition(YAxis.YAxisLabelPosition.INSIDE_CHART);
        leftAxis3.setTextColor(ColorTemplate.getHoloBlue());
        leftAxis3.setDrawGridLines(true);
        leftAxis3.setGranularityEnabled(true);
        leftAxis3.setAxisMinimum(0f);
        leftAxis3.setAxisMaximum(170f);
        leftAxis3.setYOffset(-9f);
        leftAxis3.setTextColor(Color.rgb(255, 192, 56));

        YAxis rightAxis3 = chart3.getAxisRight();
        rightAxis3.setEnabled(false);

        setData3();

    }

    private void setData1() {
        ArrayList<PieEntry> entries = new ArrayList<>();

        entries.add(new PieEntry(20.0f, "",
                getResources().getDrawable(R.drawable.smile1_24)));
        entries.add(new PieEntry(20.0f, "",
                getResources().getDrawable(R.drawable.smile2_24)));
        entries.add(new PieEntry(20.0f, "",
                getResources().getDrawable(R.drawable.smile3_24)));
        entries.add(new PieEntry(20f, "",
                getResources().getDrawable(R.drawable.smile4_24)));
        entries.add(new PieEntry(20.0f, "",
                getResources().getDrawable(R.drawable.smile5_24)));

        PieDataSet dataSet = new PieDataSet(entries, "기분별 비율");

        dataSet.setDrawIcons(true);

        dataSet.setSliceSpace(3f);
        dataSet.setIconsOffset(new MPPointF(0, -40));
        dataSet.setSelectionShift(5f);

        ArrayList<Integer> colors = new ArrayList<>();
        for (int c : ColorTemplate.JOYFUL_COLORS) {
            colors.add(c);
        }
        dataSet.setColors(colors);

        PieData data = new PieData(dataSet);
        data.setValueTextSize(22.0f);
        data.setValueTextColor(Color.WHITE);

        chart.setData(data);
        chart.invalidate();
    }

    private void setData2() {

        ArrayList<BarEntry> entries = new ArrayList<>();

        entries.add(new BarEntry(1.0f, 20.0f,
                getResources().getDrawable(R.drawable.smile1_24)));
        entries.add(new BarEntry(2.0f, 40.0f,
                getResources().getDrawable(R.drawable.smile2_24)));
        entries.add(new BarEntry(3.0f, 60.0f,
                getResources().getDrawable(R.drawable.smile3_24)));
        entries.add(new BarEntry(4.0f, 30.0f,
                getResources().getDrawable(R.drawable.smile4_24)));
        entries.add(new BarEntry(5.0f, 90.0f,
                getResources().getDrawable(R.drawable.smile5_24)));

        BarDataSet dataSet2 = new BarDataSet(entries, "Sinus Function");
        dataSet2.setColor(Color.rgb(240, 120, 124));

        ArrayList<Integer> colors = new ArrayList<>();
        for (int c : ColorTemplate.JOYFUL_COLORS) {
            colors.add(c);
        }
        dataSet2.setColors(colors);
        dataSet2.setIconsOffset(new MPPointF(0, -10));

        BarData data = new BarData(dataSet2);
        data.setValueTextSize(10f);
        data.setDrawValues(false);
        data.setBarWidth(0.8f);

        chart2.setData(data);
        chart2.invalidate();
    }

    private void setData3() {

        ArrayList<Entry> values = new ArrayList<>();
        values.add(new Entry(24f, 20.0f));
        values.add(new Entry(48f, 50.0f));
        values.add(new Entry(72f, 30.0f));
        values.add(new Entry(96f, 70.0f));
        values.add(new Entry(120f, 90.0f));

        // create a dataset and give it a type
        LineDataSet set1 = new LineDataSet(values, "DataSet 1");
        set1.setAxisDependency(YAxis.AxisDependency.LEFT);
        set1.setColor(ColorTemplate.getHoloBlue());
        set1.setValueTextColor(ColorTemplate.getHoloBlue());
        set1.setLineWidth(1.5f);
        set1.setDrawCircles(true);
        set1.setDrawValues(false);
        set1.setFillAlpha(65);
        set1.setFillColor(ColorTemplate.getHoloBlue());
        set1.setHighLightColor(Color.rgb(244, 117, 117));
        set1.setDrawCircleHole(false);

        // create a data object with the data sets
        LineData data = new LineData(set1);
        data.setValueTextColor(Color.WHITE);
        data.setValueTextSize(9f);

        // set data
        chart3.setData(data);
        chart3.invalidate();
    }

}

```

* ```initUI()``` 메서드 안에서는 세 개의 그래프를 초기화하고, ```setData1()```, ```setData2()```, ```setData3()``` 메서드를 호출하면서 샘플 데이터를 추가한다.
