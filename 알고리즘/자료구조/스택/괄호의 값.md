# 괄호의 값

## 출처

* https://www.acmicpc.net/problem/2504

## 문제

* 4개의 기호 ‘(’, ‘)’, ‘[’, ‘]’를 이용해서 만들어지는 괄호열 중에서 올바른 괄호열이란 다음과 같이 정의된다.

```
1. 한 쌍의 괄호로만 이루어진 ‘()’와 ‘[]’는 올바른 괄호열이다. 
2. 만일 X가 올바른 괄호열이면 ‘(X)’이나 ‘[X]’도 모두 올바른 괄호열이 된다. 
3. X와 Y 모두 올바른 괄호열이라면 이들을 결합한 XY도 올바른 괄호열이 된다.
```

* 예를 들어 ‘(()[[]])’나 ‘(())[][]’ 는 올바른 괄호열이지만 ‘([)]’ 나 ‘(()()[]’ 은 모두 올바른 괄호열이 아니다. 우리는 어떤 올바른 괄호열 X에 대하여 그 괄호열의 값(괄호값)을 아래와 같이 정의하고 값(X)로 표시한다. 

```
1. ‘()’ 인 괄호열의 값은 2이다.
2. ‘[]’ 인 괄호열의 값은 3이다.
3. ‘(X)’ 의 괄호값은 2×값(X) 으로 계산된다.
4. ‘[X]’ 의 괄호값은 3×값(X) 으로 계산된다.
5. 올바른 괄호열 X와 Y가 결합된 XY의 괄호값은 값(XY)= 값(X)+값(Y) 로 계산된다.
```

* 예를 들어 ‘(()[[]])([])’ 의 괄호값을 구해보자. ‘()[[]]’ 의 괄호값이 2 + 3×3=11 이므로 ‘(()[[]])’의 괄호값은 2×11=22 이다. 그리고 ‘([])’의 값은 2×3=6 이므로 전체 괄호열의 값은 22 + 6 = 28 이다.

* 여러분이 풀어야 할 문제는 주어진 괄호열을 읽고 그 괄호값을 앞에서 정의한대로 계산하여 출력하는 것이다. 

## 입력

* 첫째 줄에 괄호열을 나타내는 문자열(스트링)이 주어진다. 단 그 길이는 1 이상, 30 이하이다.

## 출력

* 첫째 줄에 그 괄호열의 값을 나타내는 정수를 출력한다. 만일 입력이 올바르지 못한 괄호열이면 반드시 0을 출력해야 한다. 

## 입력 예제 1

```
(()[[]])([])
```

## 출력 예제 1

```
28
```

## 입력 예제 2

```
[][]((])
```

## 출력 예제 2

```
0
```

## 풀이

* 문자열을 입력받고 해당 문자열의 문자들을 탐색하면서 각 경우에 대하여 연산을 수행한다.

* 여러가지 변수들을 사전에 초기화한다. 먼저 각 연산에 대하여 덧셈 내지는 곱셈을 시행할 변수 mul을 생성한다. 이때 mul은 1로 초기화한다. 그리고 결과값을 저장할 변수 result를 생성하고, 이를 0으로 초기화한다.

* 먼저 ```(``` ,```[``` 가 입력된 경우, 스택에 ```(```, ```[```를 push한다. 그리고 mul변수를 각각 2와 3으로 초기화한다.

* 그리고 ```)```,```]``` 가 입력된 경우, 먼저 스택의 조건을 살펴봐야 하는데, 만약 스택이 비어있거나 스택에서 먼저 나와야할 값이 각각 ```(```와 ```[```가 아닌 경우, 올바른 괄호 문자열이 아니므로 결과값을 0으로 초기화하고 반복문을 탈출한다.

* 위의 경우에서 해당 문자 이전의 문자가 각각 ```(```와 ```[```인 경우 괄호가 성립되므로 결과값에 mul을 더해준다. 그리고 mul을 각 괄호 값에 따라 나눠준다(2 혹은 3)

* 반복문을 다 조사한 후에, 스택에 값이 존재하면 올바른 괄호가 아니므로 0을 출력하고 그렇지 않은 경우 결과값을 출력한다.

## 소스코드

```kotlin
package datastructure.stack

import java.io.*
import java.util.*

fun main() = with(BufferedReader(InputStreamReader(System.`in`))){

    val string = readLine()//입력받은 괄호 문자열( 길이 1 이상 30 이하)

    var stack = Stack<Char>()//괄호문자열의 값을 pop과 push할 스택

    var mul = 1//()인 경우 2, []인 경우 3을 곱하는 변수
    var result = 0 //결과를 저장할 변수

    for(i in 0 until string.length){
        when (string[i]) {
            '(' -> {
                stack.push('(')//'('를 스택에 push
                mul *= 2//괄호 안에 있는 값에 2를 곱한다.
            }
            '[' -> {
                stack.push('[')//'['를 스택에 push
                mul *= 3//괄호 안에 있는 값에 3을 곱한다.
            }
            ')' -> {
                //스택이 비어있는 경우 혹은 스택의 맨위에 있는 값이 '('가 아닌 경우
                if(stack.isEmpty() || stack.peek() != '('){
                    result = 0
                    break
                }

                //문자열에서 이전 값이 '('인 경우 결과값에 mul 값을 더한다.
                if(string[i-1] =='('){
                    result += mul
                }
                stack.pop()//스택에서 맨 위에 값 pop
                mul /= 2//mul값을 2으로 나눈다.( ()가 완성됬으므로)
            }
            ']' -> {
                //스택이 비어있는 경우 혹은 스택의 맨위에 있는 값이 '['가 아닌 경우
                if(stack.isEmpty() || stack.peek() != '['){
                    result = 0
                    break
                }

                //문자열에서 이전 값이 '['인 경우 결과값에 mul 값을 더한다.
                if(string[i-1] =='['){
                    result += mul
                }
                stack.pop()//스택에서 맨 위에 값 pop
                mul /= 3//mul값을 3으로 나눈다.([]가 완성됬으므로)
            }
        }
    }

    //스택이 비어있지 않은 경우 올바른 괄호가 아니므로 0을 출력
    if(stack.isNotEmpty()){
        println(0)
    }
    //그렇지 않은 경우 결과값을 출력
    else{
        println(result)
    }

    close()
}
```
