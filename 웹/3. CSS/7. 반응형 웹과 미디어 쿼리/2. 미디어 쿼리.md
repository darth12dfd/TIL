# 미디어 쿼리

* 미디어 쿼리는 반응형 웹 디자인에서 가장 기본적인 개념이다. 사이트에 접근하는 기기의 해상도에 따라 서로 다른 스타일 시트를 적용해주는 것이다.

## 미디어 쿼리 구문

* 미디어 쿼리는 @media 속성을 사용해 특정 미디어에서 어떤 CSS를 적용할 것인지 지정해 준다. 미디어 쿼리의 기본형은 다음과 같다.

```@media [only | not] 미디어 유형 [and 조건] * [and 조건]```

```
only: 미디어쿼리를 지원하지 않는 웹브라우저에서는 미디어 쿼리를 무시하고 실행하지 않는다.
not: not다음에 지정하는 미디어 유형을 제외한다. 예를 들어 not tv라고 지정하면 TV를 제외한 미디어 유형에만 적용한다.
and: 조건을 여러 개 연결해서 추가할 수 있다.
```

* 조건이 같은 미디어 유형이 여러개라면 쉼표(,)로 구분해서 추가한다.

* 미디어 쿼리 구문은 ```<style>```과 ```</style>``` 사이에 사용하며 대소문자를 구별하지 않는다.

* 기본적으로 미디어 유형을 지정하고 필요할 경우에는 and 연산자로 조건을 적용한다. 예를 들어 당므 소스는 미디어 유형이 screen이면서 최소 너비가 768px이고 최대 너비는 1439px일 경우에 적용할 CSS를 정의하는 구문이다.

```
@media screen and (min-width:768px) and (max-width:1439px){
  ...
}
```

### 미디어 유형의 종류

* 미디어 쿼리는 미디어별로 적용할 CSS를 따로 작성하므로 @media 속성 다음에 미디어 유형을 알려줘야 한다. 미디어 유형은 아래의 표와 같다.

| 종류 | 설명 |
| ---- | ---- |
| all | 모든 미디어 유형에서 사용할 CSS를 정의한다. |
| print | 인쇄 장치에서 사용할 CSS 정의 |
| screen | 컴퓨터 스크린에서 사용할 CSS 정의. 스마트폰의 스크린도 포함|
| tv | TV에서 사용할 CSS 정의. |
| aural | 음성 합성 장치에서 사용할 CSS 정의 |
| braille | 점자 표시 장치에서 사용할 CSS 정의 |
| handheld | 패드처럼 손에 들고 다니는 장치를 위한 CSS 정의 |
| projection | 프로젝터를 위한 CSS 정의 |
| tty | 디스플레이 기능이 제한된 장치에 맞는 CSS를 정의한다. 이런 장치에서는 픽셀 단위를 사용할 수 없다. |
| embossed | 점자 프린터에서 사용할 CSS를 정의한다. |

### 웹 문서의 가로 너비와 세로 높이 속성

* 실제 웹 문서 내용이 화면에 나타나는 영역을 뷰포트라고 하는데 뷰포트의 너비와 높이를 미디어의 쿼리의 조건으로 사용할 수 있다. 이때 높잇값은 미디어에 따라 달라지므로 주의해야 한다.

* 가로너비와 세로 높이를 지정할 때 사용하는 속성은 다음 표와 같다.

| 종류 | 설명 |
| ---- | ---- |
| width, height | 웹 페이지의 가로 너비, 세로 높이를 지정한다. |
| min-width, min-height | 웹 페이지의 최소 너비, 최소 높이를 지정한다. |
| max-width, max-height | 웹 페이지의 최대 너비, 최대 높이를 지정한다. |

### 단말기의 가로 너비와 세로 높이 속성

* 단말기의 높이와 너비는 단말기 브라우저 창의 높이와 너비를 의미한다. 주의해야할 것은 대부분의 단말기 해상도와 실제 브라우저의 너비가 다르다는 것이다. 예를 들어 아이폰 단말기 자체의 해상도와 아이폰의 웹 브라우저인 사파리의 너비는 다르다.

* 단말기의 너비나 높이를 고려해 미디어 쿼리를 작성해야 한다면 아래의 표와 같은 속성을 사용한다.

| 종류 | 설명 | 
| ---- | ---- | 
| device-width, device-height | 단말기의 가로 너비, 세로 높이를 지정한다. |
| min-device-width, min-device-height | 단말기의 최소 너비, 최소 높이를 지정한다. |
| max-device-width, max-device-height | 단말기의 최대 너비, 최대 높이를 지정한다. |

* 에를 들어 iPhone X일 경우에 미디어 쿼리는 다음과 같이 작성할 수 있다.

```
@media screen and (min-device-width:375px) and (min-device-height: 812px){
  ...
}
```

### 화면 회전 속성

* 미디어쿼리에서 orientation 속성을 사용하면 기기의 방향을 확인할 수 있고 그에 따라서 웹 사이트의 레이아웃을 바꿀 수 있다. 

* orientation 속성으로는 portrait와 landscape가 있다. 가로 모드는 landscape, 세로 모드는 portrait이며, 기본값은 landscape이다.

* 예를 들어 iPhone X를 가로로 돌릴 경우에 미디어 쿼리는 다음과 같이 작성할 수 있다.

```
@media screen and (min-device-width:812px) and (orientation: landscape){
  ...
}
```

### 미디어 쿼리의 중단점

* 미디어 쿼리를 작성할 때 화면 크기에 따라 서로 다른 CSS를 적용할 분기점을 주단점이라고 한다. 이 중단점을 어떻게 지정하느냐에 따라 CSS가 달라지고 화면 레이아웃이 바뀌는데, 대부분 기기의 화면 크기를 기준으로 한다. 하지만 시중에 나온 모든 기기를 반영할 수는 없으므로 모바일과 태블릿, 데스크톱 정도로만 구분하는 것이 좋다. 

* 처리 속도나 화면 크기 등에서 다른 기기보다 모바일의 제약 조건이 더 많으므로 모바일의 레이아웃을 기본으로 하여 CSS를 만든다. 그 다음 사양이 좀 더 좋고 화면이 큰 태블릿과 데스크톱에 맞춰 더 많은 기능과 스타일을 추가한다. 이렇게 모바일을 먼저 고려하여 미디어 쿼리를 작성하는 것을 모바일 퍼스트 기법이라고 한다.

| 종류 | 설명 |
| ---- | ---- |
| 스마트폰 | 모바일 페이지는 미디어 쿼리를 사용하지 않고 기본 CSS로 작성한다. 만일 스마트폰의 방향까지 고려해서 제작한다면 min-width의 세로와 가로를 각각 portrait 320px, landscape 480px로 지정한다. |
| 태블릿 | 세로 크기가 768px 이상이면 태블릿으로 지정한다. 가로 크기는 데스크톱과 똑같이 1024px 이상으로 지정한다. |
| 데스크톱 | 화면 크기가 1024px 이상이면 데스크톱으로 설정한다. |

## 미디어 쿼리 적용

### 외부 CSS 파일 연결

* 외부 CSS 파일로 따로 저장한 뒤 ```<link>``` 태그나 ```@import```문을 사용해서 연결한다.

* ```<link>``` 태그는 ```<head>```와 ```</head>``` 태그 사이에 넣는다. 다음은 미디어 쿼리 조건이 맞다면 지정한 CSS 파일을 가져와서 적용하는 기본형이다. 속성의 순서는 상관 없다.

```
<link rel="stylesheet" media="미디어 쿼리 조건" href="css 파일 경로">
```

* ```<link>``` 태그 대신 ```@import```문을 사용할 수 있다. ```@import``` 문은 CSS를 정의하는 ```<style>```과 ```</style>``` 태그 사이에서 다음과 같이 사용한다.

```
@import url(css 파일 경로) 미디어 쿼리 조건
```

* CSS파일이 많고 규모가 큰 사이트를 개발한다면 ```@import```문보다는 ```<link>``` 태그를 주로 사용한다.

### 웹 문서에 직접 정의

* 첫 번째 방법은 ```<style>``` 태그 안에서 media 속성을 사용하여 조건을 지정하고, 그 조건에 맞는 스타일 규칙을 정의하는 것이다.

```
<style media="<조건>"{
  <스타일 규칙>
}
</style>
```

* 두 번째 방법은 스타일을 선언할 때 ```@media``` 문을 사용해 각 조건별로 스타일을 지정해 놓고 스타일을 선택해서 적용하는 것이다. 기본형은 다음과 같다.

```
<style>
  @media <조건>{
     <스타일 규칙>
  }
</style>
```

* 첫 번째 방법은 하나의 ```<style>``` 태그 안에서 하나의 조건을 지정하지만, 두번째 방법은 ```<style>``` 태그 안에 여러 개의 조건에 따른 스타일을 모두 나열해 놓고 그 중에서 선택해서 사용한다.
