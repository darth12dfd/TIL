# 소프트웨어 설계 원리와 구조적 설계

## 소프트웨어 설계 원리

* 분할정복이라는 기본적인 설계 원리.

* 일반적으로 상위 레벨에서 분할한 시스템 구성 요소를 서브시스템이라고 부름. 독립적으로 기능을 수행할 수 있고 컴파일 될 수 있는 프로그램 구성 요소를 일컬음.

* 시스템 설계자는 문제를 서브시스템으로 분할하고 추후 여러 개발자 및 디자이너들이 서로 다른 서브시스템을 독립적으로 개발 할 수 있도록 한다.

### 추상화

* 상위 수준에서 제품의 구현을 먼저 생각.

* 엔지니어링 전 과정에서 이루어 지는 중요한 원리. 엔지니어링이란 추상화가 높은 단계에서 낮은 단계로 이동하는 과정.

* 추상화의 유형은 자료 추상화, 제어 추상화, 과정 추상화로 나누어 볼 수 있음.

* 시스템을 분할하며 컴포넌트가 어떻게 상호작용하는지 외부에 나타나는 동작을 아는 것은 커모넌트 내부의 상세한 구현 방법을 아는 것에 우선하낟. 즉 컴포넌트의 구현 방법을 과감히 생략하고 외부 인터페이스에 초점을 맞추는 것이 추상화 개념.

### 정보 은닉

* 각 모듈의 내부 내용을 감추고 인터페이스를 통해서만 메시지 전달. 내부 정보 접근을 제한하여 한 모듈 또는 하부 시스템이 다른 모듈의 구현에 영향을 받지 않게 설계되는 것.

* 모듈들 사이의 독립성 유지

* 정보 은닉은 반드시 은닉 매커니즘을 갖추고 있는 프로그래밍 언어를 이용해야만 하는 것은 아님. 소프트웨어를 설계하는 기본적인 원칙.

### 단계적 정제

* 프로그램의 구조에서 점차 모듈에 대한 세부 사항으로 내려가며 구체화된다.

* 높은 추상화 단계에서 낮은 추상화 단계로 가는 단계적 정제 과정. 

### 모듈화

* 소프트웨어에서 모듈은 프로그래밍 언어로 표현시 서브르틴, 프로시저, 함수 등으로 부름.

* 복잡도 문제 해결. but 모듈 수가 너무 증가하면 모듈 크기가 감소하고 모듈 사이의 상호 교류 증가하여 시스템의 성능 하락, 과부하 현상이 나타남.

### 구조화 

* 분할 과정에 얻어질 수 있음. 분할 과정은 앞의 요구사항 분석 과정에서 일차로 이루어짐. 설계 단계에서 더욱 세분화됨.

## 응집도와 결합도

* 설계 단계에서 품질에 영향을 미치는 요소는 응집도(Cohension), 결합도(Coupling)가 있음.

### 응집도

* 모듈 내부가 얼마나 강한 연관성으로 뭉쳐져 있는가를 나타내는 모듈 성숙도의 측정치이다.

* 모듈내의 모든 요소들이 단일 기능을 수행하고 그 상위 모듈을 위해 수행되는 기능적 응집도가 가장 높은 응집도. 아무 관련없는 처리 요소들로 모듈이 형성되는 우연적 응집도가 가장 낮은 응집도.

* 모듈의 독립성 측정의 또다른 척도. 모듈 내부 요소들 사이의 응집도가 높을 수록 좋음. 모듈이나 시스템의 구성요소는 하나의 논리적 기능을 수행하거나 하나의 논리적 엔티티를 나타내는 것이 바람직.

* 외부와의 상호 교류가 최소화 될 수 있다. 모듈의 응집도를 높이면 모듈 사이의 낮은 결합도를 얻을 수 있으.ㅁ

* 소프트웨어 설계시 모듈들은 응집도는 높되, 모듈들 사이의 결합도는 낮게 하는 것이 바람직함.

* 응집도의 종류에는 기능적/순차적/교환적/절차적/시간적/논리적/우연적 응집도가 존재

```
1. 기능적 응집도: 모듈 내부의 모든 기능 요소들이 단일 문제와 연관되어 수행될 경우의 응집도
2. 순차적 응집도: 모듈 내 하나의 활동으로부터 나온 출력 데이터를 그 다음 활동의 입력 데이터로 사용할 경우의 응집도
3. 교환적 응집도: 동일한 입력과 출력을 사용하여 서로 다른 기능을 수행하는 구성 요소들이 모였을 경우의 응집도
4. 절차적 응집도: 모듈이 다수의 관련 기능을 가질 때 모듈 안의 구성 요소들이 그 기능을 순차적으로 수행할 경우의 응집도
5. 시간적 응집도: 특정 시간에 처리되는 몇 개의 기능을 모아 하나의 모듈로 작성할 경우의 응집도
6. 논리적 응집도: 유사한 성격을 갖거나 특정 형태로 분류되는 처리 요소들로 하나의 모듈이 형성되는 경우의 응집도
7. 우연적 응집도:모듈 내부의 각 구성요소들이 서로 관련 없는 요소로만 구성된 경우의 응집도
```

### 결합도

* 결합도는 모듈 사이의 상호 연관성의 복잡도를 일컬음. 모듈들 사이의 상호교류가 많고 서로의 의존이 많을 수록 결합도가 올라감.

* 인터페이스가 정확히 설정되어 있지 않거나 기능이 정확히 나누어져 있지 않을 때 불필요한 인터페이스가 나타나 모듈 사이의 이존도는 높아지고 결합도는 증가.

* 응집도와 밀접한 관계.

* 결합도가 높을수록 한 모듈을 독립적으로 변경하기 어려움. => 한 모듈의 변경이 다른 모듈에 미치는 영향도가 클 것으로 파문 효과를 일으킴.

* 파문효과가 클 수록 시스템 유지 보수 어려워 짐.

* 그렇기에 소프트웨어 설계 시 최대한 결합도를 낮추는 것이 필요. 프로그래밍에서 전역 변수 대신 매개변수 사용을 권장하는 것이 이러한 이유.

```
1. 자료 결합도
  - 모듈 간의 인터페이스가 자료 요소로만 구성될 때의 결합도.
2. 스탬프 결합도
  - 모듈 간의 인터페이스로 배열이나 레코드 등의 자료구조가 전달될 때의 결합도
3. 제어 결합도
  - 한 모듈에서 다른 모듈로 논리적인 흐름을 제어하는 데 사용하는 제어 요소(Function Code, Swtich, Tag, Flag)가 전달 될 때의 결합도
4. 외부 결합도
  - 어떤 모듈에서 외부로 선언한 데이터를 다른 모듈에서 참조할 때의 결합도
5. 공통 결합도
  - 공유되는 공통 데이터 영역을 여러 모듈이 사용할 때의 결합도
6. 내용 결합도
  - 한 모듈이 다른 모듈의 내부 기능 및 그 내부 자료를 직접 참조하거나 수정할 때의 결합도.
```

## 구조적 설계 방법

* 자료흐름 중심 설계: 구조적 분석의 결과를 구조적 설계로 옮기는 과정.

* 구조적 방법을 적용하는 경우 설꼐 초기 단계에서 시스템을 논리적으로 분할하여 모듈화하게 되고 탑다운 방식으로 세분화하는 작업이 이어짐.

* 자료 흐름을 나타내기 위해 구조적 분석 과정에서 사용하는 표기법은 버블 차트 또는 자료 흐름도라고 부름.

* 자료흐름도: 논리적인 관점에서 자료흐름과 기능 서술, 구조도표: 소프트웨어의 구조와 설계를 구체적으로 나타내는 데 사용.

* 구조도표: 프로그램 구조를 나타내는 데에 많이 사용하는 표기. 모듈 사이의 자료와 제어의 흐름 보여줌. 반복, 선태과 같은 프로그램 제어 구조 나타냄.

* 구조도표: 모듈간의 자료 제어와 정보의 교환, 주요 루프, 의사 결정 등을 보여줌. 설계 단계에서 모듈 체계와 모듈들 사이의 상호교류 내용을 나타내주는 모델.

* 데이터는 계산에 사용되어 새로운 데이터 생성 및 변형시키는 데 사용. 제어는 계산에 직접 사용되지 않는 대신 계산의 순서나 조건을 나타내 줌. 플래그가 이런 제어신호의 대표격

* 구조적 설계는 요구사항 명세서를 설계 문서로 바꾸는 데 필요한 가이드라인 제시. 이러한 변환은 시스템의 정보 흐름 유형에 의해 결정

* 변환기초, 트랜잭션 기초라는 두 가지 종류로 나눔.
* 

### 변환 흐름 중심 설계

* 정보를 받아들여 가공 처리한 후 외부세계에 출력하는 시스템을 이에 합당한 컴퓨터 구조로 매핑시키는 기법.

* 이 기법은 시스템을 구성요소들로 분할시켜주며 기본적인 기능을 수행하는 모듈들과 모듈들 사이의 계층구조 생성

* 변환흐름 중심은 시스템을 3가지로 나눔

```
1. 입력을 받아들여 시스템에서 사용할 수 있는 데이터로 정제하는 일 수행
2. 데이터를 가공 처리하는 기능을 담당
3. 가공처리된 정보를 받아 적당한 출력물로 변환시켜 출력.
```

* 시스템을 크게 세 가지로 나누어 입력을 담당하는 프로세스들을 묶은 것을 입력흐름, 입력된 정보를 가공 처리하는 프로세스들을 묶어 변환 중심, 가공 처리된 정보를 추력하는 프로세스들의 묶음을 출력 흐름이라 한다. 

* 이제 자료흐름 중심의 프로그램 구조를 만들기 시작. 변환에 기초한 프로그램 구조를 만들기 위해 필요로 하는 가이드라인은 자료흐름도의 입력흐름, 변환 중심, 출력흐름을 규명하는 것에 기초.

* 자료흐름도에서 구조도표로의 매핑은 가이드라인에 의해 이루어짐. 변환 흐름 중심의 자료흐름도에서 최상위의 프로그램 구조를 만들여 3가지의 구성요소를 발견할 수 있음.

```
입력을 처리하는 입력제어 모듈
변환을 처리하는 변환제어 모듈
출력을 처리하는 출력제어 모듈
```

* 입력 제어 모듈: 하위 계층의 모듈로부터 입력 데이터를 받아들여 상위계층의 모듈에 보냄. 필요하면 입력 데이터를 정제한 후 상위 계층에 전달.
* 출력 제어 모듈: 상위계층으로부터 출력 데이터를 받아 하위계츠으이 모듈들에게 보냄. 필요하면 출력흐름을 정제한 후 하위계층의 모듈에게 전달.

### 트랜잭션흐름 중심 설계

* 트랜잭션: 자료나 제어 시그널 등이 어떠한 행위를 유발시키는 것을 말함.

* 트랜잭션흐름에 의한 설계는 들어온 입력을 여러 갈래의 출력흐름으로 쪼갤 수 있는 경우에 가능. 트랜잭션은 입력값을 평가하고 그 결과 값에 따라여러 출력 경로 중 하나를 따로 흘러감.

* 정보흐름의 중심을 트랜잭션 중심이라고 함.

* 만약 자료흐름도가 트랜잭션 흐름을 가지고 있는 경우 트랜잭션 중심이 어디있는 가를 규명하는 일이 선행되어야 함.

* 트랜잭션 중심은 트랜잭션을 입력으로 받아들여 여러 출력 버블로 연결되어 있는 모습을 한 버블. => 트랜잭션 중심은 하나의 입력 경로와 여러 출력 경로를 가지고 있음.

* 각 동작 경로는 여러 버블로 구성될 수 있으며, 변환흐름이나 트랜잭션 흐름을 가질 수 있다.

* 트랜잭션에 기초한 프로그램 구조는 세 구성요소로 이루어짐

```
트랜잭션 중심으로 작용하는 모듈
입력을 받아들이는 모듈
각 동작 경로에 해당하는 하나 이상의 모듈
```
